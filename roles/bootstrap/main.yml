---
- hosts: localhost
  tasks:
  - name: generate ssh key
    user:
      name: tash 
      generate_ssh_key: yes
      ssh_key_bits: 2048
      ssh_key_file: .ssh/id_rsa
  - name: install amethyst window manager
    shell: brew cask install amethyst
  - name: install google chrome
    shell: brew cask install google-chrome
  - name: install hyper terminal
    shell: brew cask install hyper
  - name: install ruby-build
    shell: brew install ruby-build
  - name: install rbenv
    shell: brew install rbenv
  - name: create ~/.bash_profile
    file:
      path: ~/.bash_profile
      state: touch
  - name: check whether rbenv config added to bash_profile
    shell: grep "rbenv" ~/.bash_profile
    ignore_errors: true
    register: test_rbenv_config
  - name: add rbenv config to bash_profile
    lineinfile: dest=~/.bash_profile line="eval $(rbenv init -)"
    when: test_rbenv_config.stdout == ""
  - name: install the_silver_searcher
    shell: brew install the_silver_searcher
  - name: copy git config
    copy:
      src: ../../dotfiles/.gitconfig
      dest: ~/.gitconfig
  - name: install virtualbox
    shell: brew cask install virtualbox
